<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<!-- This Source Code Form is subject to the terms of the Mozilla Public
   - License, v. 2.0. If a copy of the MPL was not distributed with this
   - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
<HTML>
<HEAD>
<script type="application/javascript;version=1.7" src="../js/Settings.js">
</script></HEAD>
<BODY>




<script type="application/javascript;version=1.7" src="../lib/jquery.js"></script>
<link type="text/css" href="../lib/jquery-ui/css/start/jquery-ui-1.10.2.custom.css" rel="stylesheet"/>
<script type="application/javascript;version=1.7" src="../lib/jquery-ui/js/jquery-ui-1.10.2.custom.js"></script>
<script type="application/javascript;version=1.7" src="../lib/jquery.ba-bbq/jquery.ba-bbq.js"></script>

<link type="text/css" rel="stylesheet" href="../css/menu.css"/>





<script type="application/javascript;version=1.7" src="../js/aUtil.js"></script><script type="application/javascript;version=1.7" src="../js/aArray.js"></script><script type="application/javascript;version=1.7" src="../js/aString.js"></script><script type="application/javascript;version=1.7" src="../js/aMath.js"></script>
<script type="application/javascript;version=1.7" src="../js/CNV.js"></script>

<script type="application/javascript;version=1.7" src="../js/aDate.js"></script><script type="application/javascript;version=1.7" src="../js/aDuration.js"></script>

<script type="application/javascript;version=1.7" src="../js/MozillaPrograms.js"></script>
<script type="application/javascript;version=1.7" src="../js/aDebug.js"></script>
<script type="application/javascript;version=1.7" src="../js/MVEL.js"></script>
<script type="application/javascript;version=1.7" src="../js/aCompiler.js"></script>


<script type="application/javascript;version=1.7" src="../js/aThread.js"></script>
<script type="application/javascript;version=1.7" src="../js/CUBE.js"></script>
<script type="application/javascript;version=1.7" src="../js/CUBE.analytic.js"></script>
<script type="application/javascript;version=1.7" src="../js/CUBE.aggregate.js"></script>
<script type="application/javascript;version=1.7" src="../js/CUBE.column.js"></script>
<script type="application/javascript;version=1.7" src="../js/CUBE.cube.js"></script>
<script type="application/javascript;version=1.7" src="../js/CUBE.domain.js"></script>
<script type="application/javascript;version=1.7" src="../js/rest/Rest.js"></script>
<script type="application/javascript;version=1.7" src="../js/ESQuery.js"></script>
<script type="application/javascript;version=1.7" src="../js/charts/aChart.js"></script>

<script type="application/javascript;version=1.7" src="../js/gui/ProgramFilter.js"></script>
<script type="application/javascript;version=1.7" src="../js/charts/HelperFunctions.js"></script>
<script type="application/javascript;version=1.7" src="../js/rest/ElasticSearch.js"></script>

<script type="application/javascript;version=1.7" src="../js/etl/ETL.js"></script>
<script type="application/javascript;version=1.7" src="../js/etl/Hierarchy.js"></script>


<div style="height: 30px; text-align: center;vertical-align:middle;">
	<span id="status" style="height:30px">Chart Loading...</span><span class="loading"><img src="../images/spinner.gif" alt=""></span>
</div>
<a id="start" class="button" href="#">Click to Start</a>
<a id="resume" class="button" href="#">Click to Resume</a>
<a id="inc" class="button" href="#">Click for Incremental Update</a>
<a id="test" class="button" href="#">Click for single test</a>
<div id="results">No Results</div>



<script type="application/javascript;version=1.7">
	$("#start").click(function(){
		aThread.run(HIERARCHY.insertBatches);
	});

	$("#resume").click(function(){
		aThread.run(ETL.resumeInsert(HIERARCHY));
	});

	$("#inc").click(function(){
		aThread.run(function(){
			var startTime=yield (HIERARCHY.getLastUpdated());
			yield (ETL.incrementalInsert(HIERARCHY, startTime));
		});
	});

	$("#test").click(function(){
		aThread.run(function(){
//
//			var temp=yield(ESQuery.run({
//				"from":"bugs",
//				"select":{"name":"count", "value":"bug_id", "aggregate":"count"},
//				"edges":["bug_id"],
//				"esfilter":{"range":{"bug_id":{"gte":0, "lt":30000}}}
//			}));
//
//			$("#results").html(CNV.Cube2HTMLTable(temp));



			var hier=yield (HIERARCHY.get(800000, 860000));
			$("#results").html(CNV.List2HTMLTable(hier));
		});
	});

	D.addLog("results");

	//ALLOW URL PARAMETER TO PRESS ONE OF THE BUTTON
	var urlState = jQuery.bbq.getState();
	if (urlState.pressButton){
		$("#"+urlState.pressButton).click();
	}//endif

</script>


</BODY>
</HTML>
